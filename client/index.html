<head>
  <title>GTD</title>
</head>

<body>
    {{>topHud}}
  <div id="main">
    {{>login}}
    {{>modeManager}}
  </div>
    {{>bottomHud}}
</body>

<template name="topHud">
  <div id="top_hud">
    {{>loggedIn}}
    <h1>A+</h1>
    {{#unless currentUser}}
      {{{loginButton}}}
    {{/unless}}
  </div>
</template>

<template name="bottomHud">
  <div id="bottom_hud">
    {{#if currentUser}}
      <div class="grid">
        <div class="col" id="collect">
          <span class="content" id="collect">Collect</span>
        </div>
        <div class="col" id="process">
          <span class="content" id="process">Process</span>
        </div>
        <div class="col" id="review">
          <span class="content" id="review">Review</span>
        </div>
        <div class="col" id="do">
          <span class="content" id="do">Do</span>
        </div>
      </div>
    {{/if}}
  </div>
</template>

<template name="login">
  {{#unless currentUser}}
    {{#if usernameAcquired}}
      {{{passwordTextBox}}}
    {{else}}
      {{{usernameTextBox}}}
    {{/if}}
  {{/unless}}
</template>

<template name="loggedIn">
  {{#if currentUser}}
    <button id="logout">logout</button>
  {{/if}}
</template>

<template name="modeManager">
  {{#if currentUser}}
    {{#if collectMode}}
      {{>collect}}
    {{/if}}
    {{#if processMode}}
      {{>process}} 
    {{/if}}
    {{#if reviewMode}}
      {{>review}} 
    {{/if}}
    {{#if doMode}}
      {{>doIt}} 
    {{/if}}
  {{/if}}
</template>

<template name="collect">
    <textarea id="collector" class="middle" autofocus placeholder="your idea"></textarea> 
</template>

<template name="process">
  {{#if processingTask}}
    <div class="container process">
      <div class="row">
        <div class="threecol"></div>
        <div class="sixcol"><center><H2>{{currentValue}}<H2></center></div>
        <div class="threecol"></div>
      </div>

      <div class="row">
        <div class="threecol"><button id="process_tickler" class="process_button">Tickler</button></div>
        <div class="threecol"><button id="process_reference" class="process_button">Reference</button></div>
        <div class="threecol"><button id="process_nextAction" class="process_button">Next Action</button></div>
        <div class="threecol last"><button id="process_calendar" class="process_button">Calendar</button></div>
      </div>

      <div class="row">
        <h2>Projects</h2>
        <div>
          <input type="text" id="new_project" placeholder="new project" />
        </div>
        <ul>
          {{#each projects}}
            <li>{{value}}</li>
          {{/each}}
        </ul>
      </div>
    </div>
  {{else}}
    <div class="process">
      <ul>
      {{#each tasks}}
        <li>{{value}}</li>
      {{/each}}
      </ul>
    </div>
  {{/if}}
</template>

<template name="review">
  <div class="review">
    <ul>
      <li><button id="review_projects">Projects</button></li>
      <li><button id="review_tickler">Tickler</button></li>
      <li><button id="review_reference">Reference</button></li>
      <li><button id="review_calendar">Calendar</button></li>
    </ul>
  </div>
</template>

<template name="doIt">
  {{#each nextActions}}
    <div>
      {{value}}
    </div>
  {{/each}}
</template>
